{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2025-05-05 11:57:49.072473",
 "css": "/* debit_note_style.css */\r\n:root {\r\n  --colur: #3c4e87;\r\n}\r\nbody {\r\n  font-family: Arial, sans-serif;\r\n  font-size: 13px;\r\n  color: #000;\r\n  padding: 0 10px;\r\n}\r\n\r\n.header{\r\n    text-align: right;\r\n    text-transform:uppercase;\r\n    margin-right:5px;\r\n}\r\n\r\n\r\n.header-table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.header-table td {\r\n  vertical-align: top;\r\n}\r\n\r\n.company-info h2 {\r\n  color: var(--colur);\r\n  margin: 0;\r\n  font-weight:bold;\r\n  font-size:28px !important;\r\n}\r\n\r\n.company-info p {\r\n  margin: 2px 0;\r\n}\r\n\r\n.debit-note-box {\r\n  width: 100%;\r\n  /*border: 1px solid #888;*/\r\n  font-size: 12px;\r\n  color: var(--colur);\r\n\r\n}\r\n\r\n.debit-note-box td {\r\n  padding: 6px;\r\n  border: 1px solid #d8d8d8;\r\n\r\n}\r\n\r\n.debit-note-box td:first-child {\r\n  font-weight: bold;\r\n  color: var(--colur);\r\n  border: none !important;\r\n}\r\n\r\n.bill-to-label {\r\n  background-color: var(--colur);\r\n  color: white;\r\n  padding: 5px 10px;\r\n  font-weight: bold;\r\n  width: 50%;\r\n  padding:10px;\r\n  margin-top:20px;\r\n  margin-bottom:10px;\r\n}\r\n\r\n.bill-to-address p {\r\n  margin: 2px 0;\r\n  /*padding:10px;*/\r\n\r\n}\r\n\r\n.signature {\r\n  margin-top: 40px;\r\n  text-align: right;\r\n}\r\n\r\n.signature img {\r\n  height: 60px;\r\n}\r\n\r\n.table-container{\r\n    border-collapse: collapse;\r\n    width: 100%;\r\n    margin-top:25px;\r\n}\r\n\r\n.table-container td {\r\n    border: 1px solid #d8d8d8 !important;\r\n    font-size: 12px !important;\r\n    padding:10px;\r\n    height:20px !important;\r\n}\r\n\r\n.table-container th {\r\n    background-color: var(--colur) !important;\r\n    color: white;\r\n    font-weight: bold;\r\n    text-align: center;\r\n    padding:10px;\r\n}\r\n\r\ntd.bordered-cell {\r\n    border: none !important;\r\n}\r\n\r\n.serial-no {\r\n    /*background-color: red;*/\r\n    width: auto;\r\n}\r\n\r\n.left-align {\r\n    text-align: left;\r\n}\r\n",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Purchase Invoice",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "html": "{%- set purchase_order = frappe.get_doc(\"Purchase Order\", doc.items[0].purchase_order) %}\r\n\r\n<!--To get Location based address -->\r\n{% set location = purchase_order.custom_location or '' %}\r\n\r\n{% if location == \"Chennai\" %}\r\n  {% set address = frappe.get_doc(\"Address\", \"Protocol Labels India Pvt Ltd.,\") %}\r\n{% elif location %}\r\n  {% set address = frappe.get_doc(\"Address\", \"Protocol Labels India Private Limited-Billing\") %}\r\n{% else %}\r\n  {% set address = None %}\r\n{% endif %}\r\n\r\n<!--To check currency type:-->\r\n{% set currency_namespace = namespace(currency_type='') %}\r\n\r\n{% if doc.currency == 'INR' %}\r\n    {% set currency_namespace.currency_type = '\u20b9' %}\r\n{% elif doc.currency == 'USD' %}\r\n    {% set currency_namespace.currency_type = '$' %}\r\n{% else %}\r\n    {% set currency_namespace.currency_type = doc.currency + ': ' %}\r\n{% endif %}\r\n\r\n<!--To fetch the serial numbers against each item:-->\r\n{% macro get_serial_numbers(item_code, rate, delivery_note) %}\r\n  {% set doc = frappe.get_doc('Purchase Receipt', delivery_note) %}\r\n  {% set serial_numbers = [] %}\r\n\r\n  {# Collect serial numbers for the specific item_code and rate #}\r\n  {% for item in doc.items %}\r\n    {% if item.item_code == item_code and item.rate == rate and item.serial_and_batch_bundle %}\r\n      {% set serial_bundle = frappe.get_doc('Serial and Batch Bundle', item.serial_and_batch_bundle) %}\r\n      \r\n      {% for entry in serial_bundle.entries %}\r\n        {% set _ = serial_numbers.append(entry.serial_no) %}\r\n      {% endfor %}\r\n    {% endif %}\r\n  {% endfor %}\r\n\r\n  {# Return serial numbers as a comma-separated string #}\r\n  {{ serial_numbers | join(', ') }}\r\n{% endmacro %}\r\n\r\n\r\n\r\n<body>\r\n    <div class=\"header\">\r\n        <p><strong>Debit Note</strong></p>\r\n    </div>\r\n  <table class=\"header-table\">\r\n    <tr>\r\n      <td class=\"company-info\" style=\"width: 65%;\">\r\n        <h2>{{ doc.supplier_address.replace('-Billing', '') if doc.supplier_address else '' }}</h2>\r\n        <p>{{doc.address_display}}</p>\r\n      </td>\r\n      <td style=\"width: 35%;\">\r\n        <table class=\"debit-note-box\">\r\n          <tr><td>DEBIT NOTE NO</td><td>{{ doc.name }}</td></tr>\r\n          <tr><td>DEBIT NOTE DATE</td><td>{{ frappe.utils.format_datetime(doc.posting_date, \"dd-MM-yyyy\")}}</td></tr>\r\n          <tr><td>ORDER NO</td><td>{{doc.custom_purchase_order}}</td></tr>\r\n        </table>\r\n      </td>\r\n    </tr>\r\n  </table>\r\n\r\n  <div class=\"bill-to-label\">BILL TO</div>\r\n  <div class=\"bill-to-address\">\r\n    <p>Protocol Labels India Pvt. Ltd.</p>\r\n     {% if location == \"\" %}\r\n            \t <p class=\"company-address\">\r\n                    {{doc.shipping_address_display}}\r\n                </p>\r\n            {% else %}\r\n                <p class=\"company-address\">\r\n                  {{ address.address_line1 }}<br>\r\n                  {{ address.address_line2 }}<br>\r\n                  {{ address.city }}</p>\r\n                  {{ address.state }}, State Code: {{ address.gst_state_number }}<br>\r\n                  PIN Code: {{ address.pincode }}<br>\r\n                  {{ address.country }}<br>\r\n                  <strong>GSTIN: {{ address.gstin }}</strong><br>\r\n                </p>\r\n    {% endif %}\r\n  </div>\r\n\r\n   <div class=\"cost-details\">\r\n                <table class=\"table-container\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th style=\"border-left: 0px solid black;\">Sl.No</th>\r\n                            <th>Item Name</th>\r\n                            <th>Qty</th>\r\n                            <th>Serial No</th>\r\n                            <th>Amount</th>\r\n                            <th>Tax</th>\r\n                            <th>Tax Amount</th>\r\n                            <th>Line Amount</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {% for item in doc.items %} \r\n                        <tr>\r\n                            <td style=\"border-left: 0px solid black;\" class=\"center-div\">\r\n                                {{ loop.index }}\r\n                            </td>\r\n                            <td>{{ item.item_name }}</td>\r\n                            <td>{{ item.qty | int }}</td>\r\n                             <td class=\"left-align serial-no\">\r\n                             {% if item.purchase_receipt %}\r\n                                {{ get_serial_numbers(item.item_code, item.rate, item.purchase_receipt) }}\r\n                              {% endif %}\r\n                            </td> \r\n                            <td>{{ \"{:,.2f}\".format(item.rate) }}</td>\r\n                            <td>\r\n                                GST {{ (item.cgst_rate + item.sgst_rate + item.igst_rate) | int }}%\r\n                            </td>\r\n                            <td>\r\n                                {% set tax_amount = item.cgst_amount + item.sgst_amount + item.igst_amount %}\r\n                                {{\"{:,.2f}\".format(tax_amount)}}\r\n                            </td>\r\n                            <td>\r\n                                {{ \"{:,.2f}\".format(tax_amount + (item.rate*item.qty)) }}\r\n                            </td>\r\n                        </tr>\r\n                        {% endfor %}\r\n                \r\n                        <!-- Summary rows (moved from tfoot) -->\r\n                        <tfoot>\r\n                        <tr>\r\n                             <td colspan=\"6\" class=\"bordered-cell\"></td>\r\n                            <td style=\"text-align: right;\"><strong>Subtotal</strong></td>\r\n                            <td>{{ currency_namespace.currency_type }} {{ \"{:,.2f}\".format(doc.total) }}</td>\r\n                        </tr>\r\n                        <tr>\r\n                             <td colspan=\"6\" class=\"bordered-cell\"></td>\r\n                            <td style=\"text-align: right;\"><strong>Taxable Value </strong></td>\r\n                            <td>{{ currency_namespace.currency_type }} {{ \"{:,.2f}\".format(doc.base_total_taxes_and_charges) }}</td>\r\n                        </tr>\r\n                        <tr>\r\n                             <td colspan=\"6\" class=\"bordered-cell\"></td>\r\n                            <td style=\"text-align: right;background-color:#c4c9da;\"><strong>Total</strong></td>\r\n                            <td style=\"background-color:#c4c9da;\">{{ currency_namespace.currency_type }} {{ \"{:,.2f}\".format(doc.grand_total) }}</td>\r\n                        </tr>\r\n                        </tfoot>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n  <div class=\"signature\">\r\n    <img src=\"/files/ch-d.png\" alt=\"Signature\">\r\n  </div>\r\n</body>\r\n",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2025-06-30 13:27:29.389341",
 "modified_by": "Administrator",
 "module": "Custom App",
 "name": "Debit Note PI",
 "owner": "Administrator",
 "page_number": "Hide",
 "pdf_generator": "wkhtmltopdf",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}